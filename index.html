<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sambalpur University | Dept. of BT & BI Library</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* General Body Styles */
        body {
            font-family: 'Times New Roman', Times, serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f4f4f4; /* Fallback color */
            
            /* Background Image Placeholder */
            /* background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)), url('path/to/your/image.jpg'); */
            background-size: cover;
            background-attachment: fixed;
        }

        /* Header Styles */
        .header {
            background-color: #800000;
            color: white;
            padding: 20px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header .logo-title h1 { margin: 0; font-size: 2em; font-weight: normal; }
        .header .logo-title p { margin: 5px 0 0; font-size: 1em; }

        /* Navigation Bar */
        .navbar {
            display: flex;
            background-color: #333;
            overflow: hidden;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .navbar a { flex-grow: 1; color: white; text-align: center; padding: 14px 20px; text-decoration: none; font-size: 17px; transition: background-color 0.3s, color 0.3s; }
        .navbar a:hover { background-color: #ddd; color: black; }
        
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 20px;
            background-color: #f0e6e6;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .hero h2 { font-size: 2.5em; margin-bottom: 20px; color: #500000; }
        .search-container { display: flex; flex-wrap: wrap; justify-content: center; max-width: 800px; margin: 0 auto; gap: 10px; }
        .search-input-wrapper { display: flex; flex-grow: 1; min-width: 300px; border: 1px solid #ccc; border-radius: 25px; overflow: hidden; }
        .search-container input[type="text"] { width: 100%; padding: 15px; border: none; outline: none; font-size: 1em; }
        .search-container button { padding: 15px 20px; background: #800000; color: white; border: none; cursor: pointer; font-size: 1em; transition: background-color 0.3s; }
        .search-container button.search-btn { border-top-right-radius: 25px; border-bottom-right-radius: 25px; }
        .search-container button:hover { background: #a00000; }
        
        /* Section Grid Layout for Home Page */
        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .grid-item {
            background: #fff;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .grid-item h3 { color: #800000; border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; margin-top: 0; }
        .grid-item ul { list-style: none; padding: 0; }
        .grid-item ul li { margin-bottom: 10px; }
        .grid-item ul li a { text-decoration: none; color: #333; transition: color 0.3s; }
        .grid-item ul li a:hover { color: #800000; text-decoration: underline; }

        /* AI Search Results Styling */
        #ai-search-results {
            line-height: 1.6;
        }
        #result-container h4 {
            font-size: 1.25em;
            color: #500000;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }
         #result-container ul {
            list-style-position: inside;
        }

        /* Footer */
        .footer { background-color: #333; color: white; text-align: center; padding: 20px; margin-top: 30px; }
        .footer p { margin: 0; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header { flex-direction: column; text-align: center; padding: 20px; }
            .navbar { flex-direction: column; }
            .navbar a { padding: 15px; }
            .hero h2 { font-size: 2em; }
            
            .search-input-wrapper {
                width: 100%;
                min-width: 0; /* Override the desktop min-width */
            }
            .search-container {
                flex-direction: column;
            }
             .search-container button.search-btn {
                border-radius: 25px;
                margin-top: 10px;
            }
             .search-input-wrapper {
                 border-radius: 25px;
             }
             .search-input-wrapper input {
                 border-radius: 25px;
             }
        }
    </style>
</head>
<body>

    <!-- Header Section -->
    <header class="header">
        <div class="logo-title">
            <h1>Sambalpur University</h1>
            <p>Department of Biotechnology & Bioinformatics Library</p>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="index.html">Home</a>
        <a href="catalog.html">Catalog</a>
        <a href="databases.html">Databases</a>
        <a href="journals.html">Journals</a>
        <a href="about.html">About Us</a>
        <a href="contact.html">Contact</a>
    </nav>

    <!-- Main Content Area -->
    <div class="container">
        <!-- Hero Search Section -->
        <section class="hero" id="home">
            <h2>Gateway to Knowledge</h2>
            <div class="search-container">
                <div class="search-input-wrapper">
                    <input type="text" id="searchInput" placeholder="Search for books, articles, and more...">
                </div>
                <button type="button" id="search-btn" class="search-btn">Search</button>
            </div>
        </section>

        <!-- AI Search Results Container -->
        <div id="ai-search-results" class="container hidden">
            <h2 class="text-2xl font-bold text-[#800000] mb-4">Search Results</h2>
            <div id="loader" class="hidden flex flex-col items-center justify-center space-y-4 my-8">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#800000]"></div>
                <p class="text-gray-600">Searching academic databases...</p>
            </div>
            <div id="result-container" class="text-gray-700"></div>
        </div>


        <!-- Main Content Grid -->
        <div class="section-grid">
            <section class="grid-item" id="featured">
                <h3>Featured Resources</h3>
                <ul>
                    <li><a href="#">E-Books Collection</a></li>
                    <li><a href="#">Digital Thesis Archives</a></li>
                    <li><a href="#">Research Papers Portal</a></li>
                    <li><a href="#">Online Learning Courses</a></li>
                    <li><a href="#">Scopus Database</a></li>
                </ul>
            </section>
            <section class="grid-item" id="quick-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">My Library Account</a></li>
                    <li><a href="#">Ask a Librarian</a></li>
                    <li><a href="#">Interlibrary Loan</a></li>
                    <li><a href="#">Opening Hours</a></li>
                    <li><a href="#">Reserve a Study Room</a></li>
                </ul>
            </section>
            <section class="grid-item" id="news">
                <h3>News & Events</h3>
                <ul>
                    <li><a href="#">Upcoming Workshop on Academic Writing</a></li>
                    <li><a href="#">New Digital Archives Now Available</a></li>
                    <li><a href="#">Extended Hours for Final Exams</a></li>
                    <li><a href="#">Library System Maintenance Notice</a></li>
                    <li><a href="#">Guest Lecture on Bioinformatics</a></li>
                </ul>
            </section>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="footer">
        <p>&copy; 2024 Sambalpur University, Department of BT & BI. All Rights Reserved.</p>
    </footer>

    <script>
        const searchButton = document.getElementById('search-btn');
        const searchInput = document.getElementById('searchInput');
        const loader = document.getElementById('loader');
        const resultContainer = document.getElementById('result-container');
        const aiSearchResultsContainer = document.getElementById('ai-search-results');

        searchButton.addEventListener('click', () => {
            const query = searchInput.value;
            if (query.trim() === '') {
                aiSearchResultsContainer.classList.remove('hidden');
                resultContainer.innerHTML = '<p class="text-red-500">Please enter a topic in the search bar first.</p>';
                return;
            }
            
            aiSearchResultsContainer.classList.remove('hidden');
            resultContainer.innerHTML = '';
            loader.classList.remove('hidden');
            callGeminiApi(query);
        });

        async function callGeminiApi(query) {
            const apiKey = ""; // API key is provided by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const systemPrompt = "You are an AI librarian for the Sambalpur University Department of Biotechnology & Bioinformatics. When a user searches for a topic, act as if you are searching a vast academic database. Provide a concise, well-structured summary of the topic, including key concepts, definitions, and relevant areas of study. Format the response using markdown headings, lists, and bold text for clarity. Do not mention that you are an AI. Present the information as a direct result from a library database search.";
            const userQuery = `Search for: "${query}"`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();

                if (!response.ok) {
                    const errorMsg = result.error?.message || `The server responded with an error (status: ${response.status}).`;
                    throw new Error(errorMsg);
                }

                const candidate = result.candidates?.[0];
                
                if (!candidate) {
                    const blockReason = result.promptFeedback?.blockReason;
                    if (blockReason) {
                        throw new Error(`Your request was blocked for safety reasons: ${blockReason}. Please modify your query.`);
                    } else {
                        throw new Error('The response from the AI was empty. This could be due to a content policy violation or a temporary issue.');
                    }
                }
                
                const textContent = candidate.content?.parts?.[0]?.text;

                if (textContent) {
                    let htmlResult = textContent
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/## (.*)/gm, '<h4 class="font-bold text-lg mt-4 mb-2">$1</h4>')
                        .replace(/^\* (.*)/gm, '<li class="ml-5 list-disc">$1</li>');

                    if (htmlResult.includes('<li')) {
                        htmlResult = `<ul>${htmlResult}</ul>`.replace(/<\/li>\n/g, '</li>');
                    }
                    resultContainer.innerHTML = htmlResult;
                } else {
                   resultContainer.innerHTML = '<p class="text-red-500">No specific information was found for your query.</p>';
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                if (error.message.includes("API key not valid")) {
                     resultContainer.innerHTML = `<p class="text-red-500"><strong>Configuration Error:</strong> The API key is not valid. Please contact the site administrator.</p>`;
                } else {
                     resultContainer.innerHTML = `<p class="text-red-500"><strong>An error occurred:</strong> ${error.message}</p>`;
                }
            } finally {
                loader.classList.add('hidden');
            }
        }
    </script>
</body>
</html>

